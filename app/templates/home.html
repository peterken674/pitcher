{% extends 'index.html' %}
{% import "bootstrap/wtf.html" as wtf %}
{% block pitches %}
{{ super() }}

{% if current_user.is_authenticated %}
<div class="new-pitch p-3">
    <div class="current-user-pic">
        <img src="{{url_for('static', filename=current_user.profile_pic_path)}}" />
    </div>
    <div class="new">
        {{ wtf.quick_form(form) }}
    </div>
    
</div>
{% endif %}
{% if pitches %}
<div class="pitch my-2 py-2" id="cat">
    <h1 id="category-title">{{pitches[0].category.name}}</h1>
</div>
{%endif%}
{% for pitch in pitches %}

<div class="pitch p-4 my-3">
    <div class="pitch-header">
        <div class="dp-div">
            <img src="{{url_for('static', filename=pitch.user.profile_pic_path)}}" />
        </div>
        <div class="mx-3">
            <div class="names">
                <span class="full-name">{{pitch.user.fname}} {{pitch.user.lname}}</span>
                <span class="username">@{{pitch.user.username}}</span>
            </div>
            <div class="time">{{pitch.posted.strftime('%I:%M %p')}}</div>
        </div>
    </div>
    <div class="pitch-content">
        <p>
            {{pitch.pitch}}
        </p>
    </div>
    <div class="pitch-footer">
        <div class="likes ftr-highlight">
            <a href="{{url_for('auth.login')}}" target="_blank" rel="noopener noreferrer">
            <div class="thumbs-up">
                <i class="fas fa-thumbs-up"></i>
            </div>
            <div class="likes-count">{{pitch.likes}}</div>
            </a>
        </div>
        <div class="dislikes">
            <a href="{{url_for('auth.login')}}" target="_blank" rel="noopener noreferrer">
            <div class="thumbs-down">
                <i class="fas fa-thumbs-down"></i>
            </div>
            <div class="dislikes-count">{{pitch.dislikes}}</div>
            </a>
        </div>
        <div class="comments">
            <a href="{{url_for('main.comment', pitch_id=pitch.id)}}" target="_blank" rel="noopener noreferrer">
            <div>
                <i class="fas fa-comment"></i>
            </div>
            <div>{{pitch.comments.count()}}</div>
            </a>
        </div>
    </div>
</div>

{% endfor %}

{% endblock %}